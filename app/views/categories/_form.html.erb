<%= form_with(model: category, class: "contents", data: { category_target: "levelForm" },
  method: :post) do |form| %>
  <% if category.errors.any? %>
    <div id="error_explanation" class="bg-red-50 text-red-500 px-3 py-2 font-medium rounded-lg mt-3">
      <h2><%= pluralize(category.errors.count, "error") %> prohibited this category from being saved:</h2>

      <ul>
        <% category.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mt-3 bg-green-50 rounded-lg my-2 p-4" >
    <div class="my-3 font-bold " >
      Select parent category (if any)
    </div>
    <div data-controller="category"  class="flex flex-row gap-3" >
      <%= render partial: "subcategory_select", locals: { categories: @categories, level: 0, sub_categories: [], selected_id: "" } %>
    </div>
  </div>



  <div class="mt-3" >
    <%= form.label :name, "Name",class: "block" %>
    <%= form.text_field :name, placeholder: "Enter name of category", class: "p-2 rounded-lg outline-none ring-1 ring-green-600
    focus:ring-2" %>
  </div>  

  <div class="mt-3"  >
    <%= form.label :description, "Description", class: "block"  %>
    <%= form.text_area :description, placeholder: "Enter Description of category",
    class: "p-2 rounded-lg outline-none resize-none ring-1 ring-green-600 focus:ring-2 w-full",
    rows: 4 %>
  </div>

  <div class="mt-3" >
    <%= form.label :remarks, "Remarks", class: "block" %>
    <%= form.text_field :remarks, placeholder: "Enter Remarks(if any)",
    class: "p-2 rounded-lg outline-none ring-1 ring-green-600 focus:ring-2" %>
  </div>
  
  <div class="mt-3" >
    <%= form.label :sort_order, "Sort Order (-1 means category will added in last)", class: "block" %>
    <%= form.number_field :sort_order, placeholder: "Enter Sort Order", class: "p-2 rounded-lg
    ring-1 ring-green-600 focus:ring-2" %>
  </div>

  <div class="mt-3" >
    <button class="px-5 py-2 rounded-lg text-white bg-green-600" >
      Create Category
    </button>
  </div>

<% end %>
